<!DOCTYPE html>
<html lang="no">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Et værvarsel dashboard som viser værforhold for byer over hele verden">
    <title>Værdashboard - Sanntids værforhold</title>
    <link rel="stylesheet" href="/static/styles.css?v=2">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css">
</head>
<body>
    <div class="app-wrapper">
        <!-- Main Container -->
        <div class="container">
            <div class="header">
                <h1 data-en="Weather Dashboard" data-no="Værdashbord">Værdashbord</h1>
                <div class="header-actions">
                    <div class="settings-panel">
                        <button class="settings-toggle" aria-label="Toggle settings">
                            <i class="fas fa-cog"></i>
                        </button>
                        <div class="settings-dropdown" id="settings-dropdown">
                            <div class="settings-item">
                                <div class="settings-item-label">
                                    <i class="fas fa-globe"></i> <span data-en="Language" data-no="Språk">Språk</span>
                                </div>
                                <div class="language-toggle" id="language-toggle">
                                    <img src="https://flagcdn.com/24x18/gb.png" class="flag-icon" id="en-flag" alt="English">
                                    <img src="https://flagcdn.com/24x18/no.png" class="flag-icon" id="no-flag" alt="Norwegian">
                                </div>
                            </div>
                            <div class="settings-item">
                                <div class="settings-item-label">
                                    <i class="fas fa-moon"></i> <span id="theme-mode-text" data-en="Dark Mode" data-no="Mørk modus">Mørk modus</span>
                                </div>
                                <label class="theme-toggle">
                                    <input type="checkbox" id="dark-mode-toggle">
                                    <span class="theme-slider"></span>
                                </label>
                            </div>
                        </div>
                    </div>
                    <a href="https://magnuslow.com/projects.html" class="back-to-site-btn" rel="noopener noreferrer">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                            <path d="m12 19-7-7 7-7"></path>
                            <path d="m19 12H5"></path>
                        </svg>
                        <span data-en="Back to website" data-no="Tilbake til nettsiden">Tilbake til nettsiden</span>
                    </a>
                </div>
            </div>

            <!-- Input Fields and Buttons -->
            <div class="input-group">
                <label for="cityInput" class="visually-hidden">Skriv inn bynavn</label>
                <div class="input-with-location">
                    <input type="text" id="cityInput" placeholder="Skriv inn bynavn eller bruk lokasjonsknappen" aria-autocomplete="list" aria-controls="citySuggestions">
                    <button id="locationBtn" type="button" class="location-btn" title="Bruk min lokasjon" aria-label="Bruk min lokasjon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
                            <circle cx="12" cy="10" r="3"></circle>
                        </svg>
                    </button>
                    <div class="favorites-dropdown-container">
                        <button id="favoritesBtn" type="button" class="favorites-btn" title="Vis favoritter" aria-label="Vis favoritter">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon>
                            </svg>
                        </button>
                        <div class="favorites-dropdown" id="favoritesDropdown">
                            <div class="favorites-header">
                                <span data-en="Favorites" data-no="Favoritter">Favoritter</span>
                            </div>
                            <div class="favorites-list" id="favoritesList">
                                <div class="no-favorites" data-en="No favorites added yet" data-no="Ingen favoritter lagt til ennå">
                                    Ingen favoritter lagt til ennå
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <ul id="citySuggestions" class="suggestions-list" role="listbox"></ul>
            </div>

            <!-- Weather Data Section -->
            <div id="weatherData"></div>

            <!-- Loading Spinner -->
            <div id="loadingSpinner" class="spinner-overlay" style="display:none;">
                <div class="spinner"></div>
            </div>
        </div>
    </div>

    <!-- JavaScript Modules - Load in order -->
    <script src="/static/js/ui-utils.js?v=3"></script>
    <script src="/static/js/weather-translations.js?v=1"></script>
    <script src="/static/js/weather-api.js?v=3"></script>
    <script src="/static/js/weather-display.js?v=3"></script>
    <script src="/static/js/location-service.js?v=3"></script>
    <script src="/static/js/favorites.js?v=3"></script>
    <script src="/static/js/city-search.js?v=3"></script>
    <script type="module" src="/static/js/settings-panel.js?v=3"></script>
    <script type="module" src="/static/js/language.js?v=3"></script>
    <script src="/static/js/main.js?v=3"></script>
</body>
</html>